map=null,markers={},markers_id_order=[],current_chenge_marker_id=void 0,__is_map_exist=function(){return!!map},create_map=function(){if(__is_map_exist())console.log("there is a map already");else{var e=document.getElementById("map-canvas"),r=new google.maps.LatLng(35.792621,139.806513),a={zoom:15,center:r};map=new google.maps.Map(e,a)}},create_marker=function(e,r,a){__is_map_exist()?(markers[a]=new google.maps.Marker({map:map,position:new google.maps.LatLng(e,r)}),markers_id_order.push(a)):console.log("there is no map")},create_img_marker=function(e,r,a,o){__is_map_exist()?(4>o?markers[a]=new google.maps.Marker({map:map,position:new google.maps.LatLng(e,r),icon:new google.maps.MarkerImage("/assets/marker"+o+".png",new google.maps.Size(100,100))}):create_marker(e,r,a),markers_id_order.push(a)):console.log("there is no map")},chenge_marker_design=function(e){__is_map_exist()?(void 0!=current_chenge_marker_id&&void 0!=markers[current_chenge_marker_id]&&markers[current_chenge_marker_id].setOptions({icon:""}),markers[e].setOptions({icon:new google.maps.MarkerImage("/assets/click-marker.png",new google.maps.Size(100,100))}),current_chenge_marker_id=e):console.log("there is no map")},add_marker_event=function(e){google.maps.event.addListener(e,"click",function(){var r=e.position.lat(),a=e.position.lng(),o=parseFloat($(".radius-value").text());console.log(r),console.log(a),console.log(o),$("#search-hotel-button .search-lat").val(r),$("#search-hotel-button .search-lng").val(a),$("#search-hotel-button .search-radius").val(o),$("#search-hotel-button .do-search").trigger("click")})},move_map_center=function(e,r){if(1==markers_id_order.length){var a=new google.maps.LatLng(e,r);map.setCenter(a)}else{for(var e=[],r=[],a=null,o=0;o<markers_id_order.length;o++)a=markers[markers_id_order[o]].getPosition(),e[o]=a.lat(),r[o]=a.lng();var n=Math.min.apply(null,e),t=Math.min.apply(null,r),s=Math.max.apply(null,e),m=Math.max.apply(null,r),_=new google.maps.LatLng(n,t),i=new google.maps.LatLng(s,m),g=new google.maps.LatLngBounds(_,i);map.fitBounds(g)}},top_init_gmap=function(){create_map();var e=gon.user_items_info[0].length;if(e>0){for(var r=0;e-1>r;r++){var a=gon.user_items_info[1][r],o=gon.user_items_info[2][r];create_marker(a[0],a[1],o)}var n=gon.user_items_info[1][e-1],t=gon.user_items_info[2][e-1];create_marker(n[0],n[1],t),move_map_center(n[0],n[1])}},owner_init_gmap=function(){create_map();var e=gon.group_items_info[0].length,r=1e5,a=0;if(e>0){for(var o=0;e-1>o;o++){var n=gon.group_items_info[1][o],t=gon.group_items_info[2][o],s=gon.group_items_info[3][o];r>s&&(a+=1,r=s),create_img_marker(n[0],n[1],t,a),add_marker_event(markers[t])}var m=gon.group_items_info[1][e-1],_=gon.group_items_info[2][e-1],i=gon.group_items_info[3][e-1];r>i&&(a+=1),create_img_marker(m[0],m[1],_,a),add_marker_event(markers[_]),move_map_center(m[0],m[1])}};